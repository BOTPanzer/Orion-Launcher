<div>
<div id="text" style="color: var(--c4); font-size: 40px; margin: 10px; margin-left: 20px;">Home</div>

<div id="name" style="color: var(--c4); font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 20px; padding: 5px; padding-left: 10px;">Folder/Game Name:</div>
<div style="align-items: center; margin: 20px; margin-top: 0px;">
  <input id='nameText' type="text" size="50" maxlength="50" style="height: 32px; padding-left: 10px; padding-right: 10px; color: var(--c3); font-size: 16px; font-family: ItemFont; background-color: var(--c1); border-style: solid; border-color: var(--c2); border-width: 1px;"></input>
</div>
<div id="path" style="color: var(--c4); font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 20px; padding: 5px; padding-left: 10px;">Game Path:</div>
<div style="align-items: center; margin: 20px; margin-top: 0px; display: flex;">
  <input id='pathText' type="text" size="50" style="height: 32px; padding-left: 10px; padding-right: 10px; color: var(--c3); font-size: 16px; font-family: ItemFont; background-color: var(--c1); border-style: solid; border-color: var(--c2); border-width: 1px;"></input>
  <div id="folder" style="height: 36px; min-width: 36px; background-image: url('./Data/Images/icon_description_folder.png'); margin-left: 10px">
	  <img style="height: 30px; min-width: 30px; margin: 3px;" src="./Data/Images/icon_folder.png"></img>
  </div>
</div>
<div id="icon" style="color: var(--c4); font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 20px; padding: 5px; padding-left: 10px;">Game Icon Path (Optional):</div>
<div style="align-items: center; margin: 20px; margin-top: 0px; display: flex;">
  <input id='iconText' type="text" size="50" style="height: 32px; padding-left: 10px; padding-right: 10px; color: var(--c3); font-size: 16px; font-family: ItemFont; background-color: var(--c1); border-style: solid; border-color: var(--c2); border-width: 1px;"></input>
  <div id="folderIcon" style="height: 36px; min-width: 36px; background-image: url('./Data/Images/icon_description_folder.png'); margin-left: 10px">
    <img style="height: 30px; min-width: 30px; margin: 3px;" src="./Data/Images/icon_folder.png"></img>
  </div>
</div>
<div style="margin-left: 20px; margin-right: 20px; margin-bottom: 20px; display: flex; align-items: center;">
  <div id="addFolder" style="height: 36px; width: 107px; display: flex; justify-content: center; align-items: center; background-image: url('./Data/Images/icon_description_launch.png'); margin-right: 10px; color: var(--c3);">
    <div style="font-family: ItemFont;">Add Folder</div>
  </div>
  <div id="addGame" style="height: 36px; width: 107px; display: flex; justify-content: center; align-items: center; background-image: url('./Data/Images/icon_description_launch.png'); margin-right: 10px; color: var(--c3);">
    <div style="font-family: ItemFont;">Add Game</div>
  </div>
  <div id="log" style="color: var(--c4); font-family: ItemFont; font-size: 20px; padding: 5px; height: fit-content;"></div>
</div>
</div>

<script>
  ipcRenderer.on('start', (event, actualPath, dataFolder) => {
    if (actualPath == dataFolder) document.getElementById('text').innerHTML = 'Home'
    else document.getElementById('text').innerHTML = actualPath.slice(0,-1).substring(actualPath.slice(0,-1).lastIndexOf('\\')+1)
  })

  document.getElementById('addFolder').addEventListener('click', () => {
    document.getElementById('addFolder').style.backgroundImage = 'url("./Data/Images/icon_description_launch_clicked.png")';
    setTimeout(function() {
      document.getElementById('addFolder').style.backgroundImage = 'url("./Data/Images/icon_description_launch.png")';
      let name = document.getElementById('nameText').value
      if (name == '') {
        document.getElementById('log').innerText = 'Name Is Necesary'
        return
      }
      ipcRenderer.send('addFolder', name)
    }, 100)
  })

  document.getElementById('folder').addEventListener('click', () => {
    document.getElementById('folder').style.backgroundImage = 'url("./Data/Images/icon_description_folder_clicked.png")';
    setTimeout(function() {
      document.getElementById('folder').style.backgroundImage = 'url("./Data/Images/icon_description_folder.png")';
      ipcRenderer.send('getFile')
    }, 100)
  })

  ipcRenderer.on('fileGotten', (event, path) => {
    if (path != '')
      document.getElementById('pathText').value = path
    if (document.getElementById('nameText').value == '')
      document.getElementById('nameText').value = path.substring(path.lastIndexOf('\\')+1)
  })

  document.getElementById('folderIcon').addEventListener('click', () => {
    document.getElementById('folderIcon').style.backgroundImage = 'url("./Data/Images/icon_description_folder_clicked.png")';
    setTimeout(function() {
      document.getElementById('folderIcon').style.backgroundImage = 'url("./Data/Images/icon_description_folder.png")';
      let a = document.getElementById('pathText').value
      if (a.startsWith('"') && !a.endsWith('"')) {
        ipcRenderer.send('getFileIcon', a.substring(1, a.lastIndexOf('"')))
      } else {
        ipcRenderer.send('getFileIcon', a)
      }
    }, 100)
  })

  ipcRenderer.on('fileGottenIcon', (event, path) => {
    if (path != '')
      document.getElementById('iconText').value = path
  })

  ipcRenderer.on('log', (event, text) => {
   document.getElementById('log').innerText = text
  })

  document.getElementById('addGame').addEventListener('click', () => {
    document.getElementById('addGame').style.backgroundImage = 'url("./Data/Images/icon_description_launch_clicked.png")';
    setTimeout(function() {
      document.getElementById('addGame').style.backgroundImage = 'url("./Data/Images/icon_description_launch.png")';
      let name = document.getElementById('nameText').value
      if (name == '') {
        document.getElementById('log').innerText = 'Name Is Necesary'
        return
      }
      let path = document.getElementById('pathText').value
      if (path == '') {
        document.getElementById('log').innerText = 'Path Is Necesary'
        return
      }
      let icon = document.getElementById('iconText').value
      ipcRenderer.send('addGame', name, path, icon)
    }, 100)
  })
</script>