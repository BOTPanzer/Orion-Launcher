<div style="height: 100%; width: 100%; margin: 0px; padding: 0px;">
  <div id="name" style="color: var(--text2Color);">
    <div style="height: 20px; font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 15px; padding: 5px; padding-left: 10px;">Name:</div>
    <div style="align-items: center; margin: 20px; margin-top: 0px;">
      <input id='nameText' type="text" maxlength="50" style="height: 32px; width: 330px; padding-left: 10px; padding-right: 10px; color: var(--textColor); font-size: 16px; font-family: ItemFont; background-color: var(--boxColor); border-style: solid; border-color: var(--boxBorderColor); border-width: 1px; border-radius: var(--round);"></input>
    </div>
  </div>

  <div id="path" style="color: var(--text2Color);">
    <div style="height: 20px; font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 20px; padding: 5px; padding-left: 10px;">Path:</div>
    <div style="align-items: center; margin: 20px; margin-top: 0px; display: flex;">
      <input id='pathText' type="text" style="height: 32px; width: 284px; padding-left: 10px; padding-right: 10px; color: var(--textColor); font-size: 16px; font-family: ItemFont; background-color: var(--boxColor); border-style: solid; border-color: var(--boxBorderColor); border-width: 1px; border-radius: var(--round);"></input>
      <div id="folder" class="sbutton" style="height: 36px; min-width: 36px; background-image: url('Data/Images/icon_description_folder.png'); margin-left: 10px;">
        <img style="height: 30px; min-width: 30px; margin: 3px; -webkit-user-drag: none;" src="Data/Images/icon_folder.png"></img>
      </div>
    </div>
  </div>

  <div id="icon" style="color: var(--text2Color);">
    <div style="height: 20px; font-family: ItemFont; font-size: 20px; margin: 10px; margin-top: 20px; padding: 5px; padding-left: 10px;">Icon Path (Optional):</div>
    <div style="align-items: center; margin: 20px; margin-top: 0px; display: flex;">
      <input id='iconText' type="text" style="height: 32px; width: 284px; padding-left: 10px; padding-right: 10px; color: var(--textColor); font-size: 16px; font-family: ItemFont; background-color: var(--boxColor); border-style: solid; border-color: var(--boxBorderColor); border-width: 1px; border-radius: var(--round);"></input>
      <div id="folderIcon" class="sbutton" style="height: 36px; min-width: 36px; background-image: url('Data/Images/icon_description_folder.png'); margin-left: 10px;">
        <img style="height: 30px; min-width: 30px; margin: 3px; -webkit-user-drag: none;" src="Data/Images/icon_folder.png"></img>
      </div>
    </div>
  </div>

  <div style="width: 100%; position: absolute; bottom: 20px; display: flex; align-items: center;">
    <div id="addGame" class="sbutton" style="height: 36px; width: 107px; background-image: url('Data/Images/icon_description_launch.png'); margin-left: 20px;">Add Game</div>
    <div id="log" style="margin-left: auto; margin-right: 25px; font-family: ItemFont; font-size: 16px; color: var(--text2Color);"></div>
  </div>
</div>

<script>
  ipcRenderer.on('setLocation', (event, actualPath) => {
    addButtonListener('addGame', function() {
      document.getElementById('addGame').style.backgroundImage = 'url("Data/Images/icon_description_launch_clicked.png")';
    }, function() {
      document.getElementById('addGame').style.backgroundImage = 'url("Data/Images/icon_description_launch.png")';
    }, function() {
      let name = document.getElementById('nameText').value
      if (name == '') {
        document.getElementById('log').innerText = 'Name Is Necesary'
        return
      }
      let path = document.getElementById('pathText').value
      if (path == '') {
        document.getElementById('log').innerText = 'Path Is Necesary'
        return
      }
      let icon = document.getElementById('iconText').value

      const fs = require('fs')
      let fullName = actualPath+name.trim()+'.txt'
      let data = path
      if (icon != '') data = path+'\n'+icon
      if (!fs.existsSync(fullName)) {
        fs.writeFile(fullName, data, (err) => {
          document.getElementById('log').innerText = `Game "${name}" Added`
          ipcRenderer.send('exitContextRefresh')
        })
      } else document.getElementById('log').innerText = `Game "${name}" Already Exists`
    })
  })
  
  addButtonListener('folder', function() {
    document.getElementById('folder').style.backgroundImage = 'url("Data/Images/icon_description_folder_clicked.png")';
  }, function() {
    document.getElementById('folder').style.backgroundImage = 'url("Data/Images/icon_description_folder.png")';
  }, function() {
    let a = document.getElementById('pathText').value
    let gamePathArg = getPathInfo(a)
    let path = gamePathArg.pathClean.substring(0, gamePathArg.pathClean.lastIndexOf('\\')+1)
    ipcRenderer.send('getFile2', path, 'Choose a Game', 'fileGotten')
  })

  ipcRenderer.on('fileGotten', (event, path) => {
    if (path != '')
      document.getElementById('pathText').value = path
    if (document.getElementById('nameText').value == '')
      document.getElementById('nameText').value = path.substring(path.lastIndexOf('\\')+1)
  })
  
  addButtonListener('folderIcon', function() {
    document.getElementById('folderIcon').style.backgroundImage = 'url("Data/Images/icon_description_folder_clicked.png")';
  }, function() {
    document.getElementById('folderIcon').style.backgroundImage = 'url("Data/Images/icon_description_folder.png")';
  }, function() {
    let a = document.getElementById('pathText').value
    if (document.getElementById('iconText').value != '') a = document.getElementById('iconText').value
    let gamePathArg = getPathInfo(a)
    let path = gamePathArg.pathClean.substring(0, gamePathArg.pathClean.lastIndexOf('\\')+1)
    ipcRenderer.send('getFile2', path, 'Choose an Icon', 'fileGottenIcon')
  })

  ipcRenderer.on('fileGottenIcon', (event, path) => {
    if (path != '')
      document.getElementById('iconText').value = path
  })
</script>
</html>